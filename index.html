<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibed Tools - Developer Utilities</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }

        body {
            background: #000000;
            color: #e6e6e6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .terminal {
            width: 100%;
            max-width: 1200px;
        }

        .window {
            background: #000000;
            border: 1px solid #b3b3b3;
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #b3b3b3;
        }

        h1 {
            font-size: 1.8rem;
            color: #e6e6e6;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            color: #b3b3b3;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .ascii-border {
            color: #b3b3b3;
            text-align: center;
            margin: 20px 0;
            font-size: 0.8rem;
            line-height: 1.2;
        }

        .search-section {
            margin-bottom: 30px;
            border-bottom: 1px solid #b3b3b3;
            padding-bottom: 20px;
        }

        .input-line {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .prompt {
            color: #e6e6e6;
            margin-right: 5px;
            font-weight: bold;
            min-width: 20px;
        }

        .command {
            color: #b3b3b3;
            margin-right: 10px;
            min-width: 60px;
        }

        #searchInput {
            background: #000000;
            color: #e6e6e6;
            border: none;
            border-bottom: 1px solid #b3b3b3;
            padding: 5px 0;
            font-size: 1rem;
            font-family: inherit;
            flex: 1;
            outline: none;
            max-width: 300px;
        }

        #searchInput::placeholder {
            color: #808080;
        }

        #searchInput:focus {
            border-bottom-color: #e6e6e6;
        }

        .search-stats {
            color: #b3b3b3;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        .tool-list {
            margin-bottom: 30px;
        }

        .tool-entry {
            background: #000000;
            border: 1px solid #b3b3b3;
            margin-bottom: 15px;
            transition: all 0.2s ease;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .tool-entry:hover,
        .tool-entry.selected {
            border-color: #e6e6e6;
            background: #1a1a1a;
        }

        .tool-header {
            padding: 15px 20px;
            border-bottom: 1px solid #b3b3b3;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tool-name {
            color: #e6e6e6;
            font-size: 1rem;
            font-weight: bold;
        }

        .tool-status {
            color: #b3b3b3;
            font-size: 0.8rem;
        }

        .tool-body {
            padding: 15px 20px;
        }

        .tool-description {
            color: #b3b3b3;
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .tool-path {
            color: #808080;
            font-size: 0.8rem;
        }

        .system-info {
            border-top: 1px solid #b3b3b3;
            padding-top: 20px;
            margin-top: 30px;
        }

        .info-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        .info-label {
            color: #b3b3b3;
        }

        .info-value {
            color: #e6e6e6;
        }

        .github-link {
            text-align: center;
            margin-top: 20px;
        }

        .github-link a {
            color: #808080;
            text-decoration: none;
            font-size: 0.8rem;
            border: 1px solid #808080;
            padding: 8px 16px;
            display: inline-block;
            transition: all 0.2s ease;
        }

        .github-link a:hover {
            color: #e6e6e6;
            border-color: #b3b3b3;
        }

        @media (max-width: 768px) {
            .window {
                padding: 20px;
            }

            h1 {
                font-size: 1.4rem;
                letter-spacing: 1px;
            }

            .input-line {
                flex-direction: column;
                align-items: stretch;
                gap: 10px;
            }

            .prompt, .command {
                margin-right: 0;
            }

            #searchInput {
                max-width: 100%;
                border: 1px solid #b3b3b3;
                padding: 8px;
            }

            .tool-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }

            .info-line {
                flex-direction: column;
                gap: 2px;
            }
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="window">
            <div class="header">
                <h1>VIBED TOOLS</h1>
                <p class="subtitle">Client-side only - everything runs in browser</p>
            </div>

            <div class="search-section">
                <div class="input-line">
                    <span class="prompt">$ </span>
                    <span class="command">search</span>
                    <input type="text" id="searchInput" placeholder="find_tool" autocomplete="off">
                </div>
                <div id="searchStats" class="search-stats hidden">
                    <span class="prompt">> </span>
                    <span id="searchCount">0</span> tools found
                </div>
            </div>

            <div class="tool-list" id="toolList">
                <a href="/base64-swiss-army/" class="tool-entry">
                    <div class="tool-header">
                        <div class="tool-name">BASE64_SWISS_ARMY</div>
                        <div class="tool-status">[ONLINE]</div>
                    </div>
                    <div class="tool-body">
                        <div class="tool-description">
                            Encode/decode base64 with auto-detection of data types (images, text, etc.) and inline preview.
                            Supports file upload, clipboard operations, and smart format detection.
                        </div>
                        <div class="tool-path">$ cd /base64-swiss-army/</div>
                    </div>
                </a>

                <a href="/hello-world/" class="tool-entry">
                    <div class="tool-header">
                        <div class="tool-name">HELLO_WORLD</div>
                        <div class="tool-status">[ONLINE]</div>
                    </div>
                    <div class="tool-body">
                        <div class="tool-description">
                            A simple greeting tool to test the platform and demonstrate basic functionality.
                        </div>
                        <div class="tool-path">$ cd /hello-world/</div>
                    </div>
                </a>

                <a href="/markdown-table-sorter/" class="tool-entry">
                    <div class="tool-header">
                        <div class="tool-name">MARKDOWN_TABLE_SORTER</div>
                        <div class="tool-status">[ONLINE]</div>
                    </div>
                    <div class="tool-body">
                        <div class="tool-description">
                            Sort markdown tables by any column with intelligent data type detection.
                            Supports text, numbers, dates, and markdown links.
                        </div>
                        <div class="tool-path">$ cd /markdown-table-sorter/</div>
                    </div>
                </a>

                <a href="/secure-drop/" class="tool-entry">
                    <div class="tool-header">
                        <div class="tool-name">SECURE_DROP</div>
                        <div class="tool-status">[ONLINE]</div>
                    </div>
                    <div class="tool-body">
                        <div class="tool-description">
                            Encrypt and transfer files securely between machines using AES-256-GCM.
                            All encryption performed client-side with password-based key derivation.
                        </div>
                        <div class="tool-path">$ cd /secure-drop/</div>
                    </div>
                </a>

                <a href="/uc-schools-map/" class="tool-entry">
                    <div class="tool-header">
                        <div class="tool-name">UC_SCHOOLS_MAP</div>
                        <div class="tool-status">[ONLINE]</div>
                    </div>
                    <div class="tool-body">
                        <div class="tool-description">
                            Interactive map of Special Olympics Unified Champion Schools.
                            Visualize locations and data for participating schools in the US.
                        </div>
                        <div class="tool-path">$ cd /uc-schools-map/</div>
                    </div>
                </a>
            </div>

            <div class="ascii-border">
                ================================================================
            </div>

            <div class="system-info">
                <div class="info-line">
                    <span class="info-label">SYSTEM_STATUS:</span>
                    <span class="info-value">OPERATIONAL</span>
                </div>
                <div class="info-line">
                    <span class="info-label">TOOLS_LOADED:</span>
                    <span class="info-value">5</span>
                </div>
                <div class="info-line">
                    <span class="info-label">BASE_URL:</span>
                    <span class="info-value">tools.apps.alexbrand.dev</span>
                </div>
                <div class="info-line">
                    <span class="info-label">ARCHITECTURE:</span>
                    <span class="info-value">NGINX/DOCKER/AMD64</span>
                </div>
            </div>

            <div class="github-link">
                <a href="https://github.com/alexbrand/vibed-tools" target="_blank">
                    [VIEW_SOURCE]
                </a>
            </div>
        </div>
    </div>

    <script>
        class FuzzyToolSearch {
            constructor() {
                this.searchInput = document.getElementById('searchInput');
                this.toolList = document.getElementById('toolList');
                this.searchStats = document.getElementById('searchStats');
                this.searchCount = document.getElementById('searchCount');

                this.tools = [];
                this.originalToolsHtml = '';
                this.selectedIndex = -1;

                this.initializeSearch();
            }

            initializeSearch() {
                // Store original tools HTML and extract tool data
                this.originalToolsHtml = this.toolList.innerHTML;
                this.extractToolData();

                // Add event listener for search input
                this.searchInput.addEventListener('input', (e) => this.handleSearch(e.target.value));

                // Add keyboard shortcuts
                this.searchInput.addEventListener('keydown', (e) => this.handleKeydown(e));

                // Auto-focus search when user starts typing
                document.addEventListener('keydown', (e) => this.handleGlobalKeydown(e));

                // Initial count
                this.updateSearchStats(this.tools.length, this.tools.length);
            }

            extractToolData() {
                const toolEntries = this.toolList.querySelectorAll('.tool-entry');
                this.tools = Array.from(toolEntries).map(entry => {
                    const toolName = entry.querySelector('.tool-name').textContent;
                    const description = entry.querySelector('.tool-description').textContent;
                    const url = entry.getAttribute('href');

                    return {
                        name: toolName,
                        description: description,
                        url: url,
                        element: entry.outerHTML,
                        searchText: `${toolName} ${description}`.toLowerCase()
                    };
                });
            }

            handleSearch(query) {
                const trimmedQuery = query.trim().toLowerCase();

                if (!trimmedQuery) {
                    // Show all tools if search is empty
                    this.toolList.innerHTML = this.originalToolsHtml;
                    this.updateSearchStats(this.tools.length, this.tools.length);
                    this.searchStats.classList.add('hidden');
                    return;
                }

                const filteredTools = this.fuzzySearch(trimmedQuery);
                this.displayResults(filteredTools);
                this.updateSearchStats(filteredTools.length, this.tools.length);
                this.searchStats.classList.remove('hidden');
                this.selectedIndex = -1; // Reset selection on new search
            }

            fuzzySearch(query) {
                return this.tools
                    .map(tool => ({
                        ...tool,
                        score: this.calculateFuzzyScore(query, tool.searchText, tool.name.toLowerCase())
                    }))
                    .filter(tool => tool.score > 0)
                    .sort((a, b) => b.score - a.score);
            }

            calculateFuzzyScore(query, searchText, toolName) {
                // Exact substring match gets highest score
                if (searchText.includes(query)) {
                    return toolName.includes(query) ? 1000 : 800;
                }

                // Word boundary matches (e.g., "base" matches "base64" but not "database")
                const words = searchText.split(/[\s_-]+/);
                for (let word of words) {
                    if (word.startsWith(query)) {
                        return 600; // High score for word starts
                    }
                }

                // For short queries (3 chars or less), be more strict
                if (query.length <= 3) {
                    // Only allow if query starts a significant word
                    const significantWords = toolName.toLowerCase().split(/[\s_-]+/);
                    for (let word of significantWords) {
                        if (word.startsWith(query) && word.length >= 3) {
                            return 400;
                        }
                    }
                    return 0; // No fuzzy matching for short queries
                }

                // Fuzzy matching for longer queries (4+ chars)
                let score = 0;
                let queryIndex = 0;
                let consecutiveMatches = 0;
                let wordBoundaryMatches = 0;

                for (let i = 0; i < searchText.length && queryIndex < query.length; i++) {
                    if (searchText[i] === query[queryIndex]) {
                        queryIndex++;
                        consecutiveMatches++;

                        // Bonus for consecutive matches
                        score += consecutiveMatches * 15;

                        // Big bonus if match is at word boundary
                        if (i === 0 || searchText[i - 1] === ' ' || searchText[i - 1] === '_' || searchText[i - 1] === '-') {
                            score += 100;
                            wordBoundaryMatches++;
                        }
                    } else {
                        consecutiveMatches = 0;
                    }
                }

                // Must match all characters in query
                if (queryIndex === query.length) {
                    // Require at least 50% word boundary matches for longer queries
                    const requiredBoundaryMatches = Math.ceil(query.length * 0.4);
                    if (wordBoundaryMatches < requiredBoundaryMatches) {
                        return 0;
                    }

                    // Bonus for shorter strings (more relevant)
                    score += Math.max(0, 50 - searchText.length);
                    return Math.max(score, 100); // Minimum score for valid fuzzy matches
                }

                return 0;
            }

            displayResults(filteredTools) {
                if (filteredTools.length === 0) {
                    this.toolList.innerHTML = `
                        <div style="color: #808080; text-align: center; padding: 40px; font-style: italic;">
                            No tools match "${this.searchInput.value}"
                        </div>
                    `;
                } else {
                    this.toolList.innerHTML = filteredTools.map(tool => tool.element).join('');
                }
                this.updateSelection();
            }

            updateSearchStats(found, total) {
                this.searchCount.textContent = found;
            }

            handleKeydown(e) {
                const visibleTools = this.toolList.querySelectorAll('.tool-entry');

                switch(e.key) {
                    case 'Escape':
                        this.searchInput.value = '';
                        this.handleSearch('');
                        this.searchInput.blur();
                        this.selectedIndex = -1;
                        this.updateSelection();
                        break;

                    case 'ArrowDown':
                        e.preventDefault();
                        if (visibleTools.length > 0) {
                            this.selectedIndex = (this.selectedIndex + 1) % visibleTools.length;
                            this.updateSelection();
                        }
                        break;

                    case 'ArrowUp':
                        e.preventDefault();
                        if (visibleTools.length > 0) {
                            this.selectedIndex = this.selectedIndex <= 0 ?
                                visibleTools.length - 1 : this.selectedIndex - 1;
                            this.updateSelection();
                        }
                        break;

                    case 'Enter':
                        e.preventDefault();
                        if (visibleTools.length > 0) {
                            let targetTool;
                            if (this.selectedIndex >= 0 && this.selectedIndex < visibleTools.length) {
                                // Navigate to selected tool
                                targetTool = visibleTools[this.selectedIndex];
                            } else if (visibleTools.length === 1) {
                                // Navigate to single result
                                targetTool = visibleTools[0];
                            }

                            if (targetTool) {
                                const toolUrl = targetTool.getAttribute('href');
                                if (toolUrl) {
                                    window.location.href = toolUrl;
                                }
                            }
                        }
                        break;
                }
            }

            updateSelection() {
                const visibleTools = this.toolList.querySelectorAll('.tool-entry');

                // Remove previous selection
                visibleTools.forEach(tool => tool.classList.remove('selected'));

                // Add selection to current index
                if (this.selectedIndex >= 0 && this.selectedIndex < visibleTools.length) {
                    const selectedTool = visibleTools[this.selectedIndex];
                    selectedTool.classList.add('selected');

                    // Scroll into view if needed
                    selectedTool.scrollIntoView({
                        block: 'nearest',
                        behavior: 'smooth'
                    });
                }
            }

            handleGlobalKeydown(e) {
                // Handle navigation keys globally when search is not focused
                if (document.activeElement !== this.searchInput &&
                    ['ArrowUp', 'ArrowDown', 'Enter', 'Escape'].includes(e.key)) {
                    this.searchInput.focus();
                    this.handleKeydown(e);
                    return;
                }

                // Auto-focus search when typing (but not on special keys or shortcuts)
                if (!e.ctrlKey && !e.metaKey && !e.altKey &&
                    e.key.length === 1 &&
                    document.activeElement !== this.searchInput &&
                    !['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName) &&
                    !['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'Escape', 'Tab'].includes(e.key)) {

                    this.searchInput.focus();
                    // Let the character be typed naturally
                }
            }
        }

        // Initialize search when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new FuzzyToolSearch();
        });
    </script>
</body>
</html>
